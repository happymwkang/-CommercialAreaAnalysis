<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
	    google.charts.load('current', {'packages':['corechart']});
      //google.charts.setOnLoadCallback(drawChart);
      
      /* window.onload = function(){
    	  var chartData = [
              ['Task', 'Hours per Day'],
              ['Work',     11],
              ['Eat',      2],
              ['Commute',  2],
              ['Watch TV', 2],
              ['Sleep',    7]
            ];
    	  drawChart(chartData);
      } */
      function drawChart(chartData) {
        var data = google.visualization.arrayToDataTable(chartData);
        var options = {
          title: '내일상'
        };
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
      }
      
      function ajaxJSON() {
		  var xhttp = new XMLHttpRequest();
		  xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
		    	var chartData = this.responseText;
		    	chartData = eval(chartData);
		    	alert(chartData[0][0]);
		    	  drawChart(chartData);
		    }
		  };
		  xhttp.open("GET", "js10_ajaxResArray.jsp", true);
		  xhttp.send();
		}
      	//ajaxJSON();
      //drawChart();
    </script>
  </head>
  <body>
  	<button onclick="ajaxJSON()">클릭</button>
    <div id="piechart" style="width: 900px; height: 800px;"></div>
    
  </body>
</html>